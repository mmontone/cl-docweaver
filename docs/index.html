<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- 
Copyright (C) 2021 Mariano Montone

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with no
Invariant Sections, with no Front-Cover Texts, and with no Back-Cover
Texts.  A copy of the license is included in the section entitled
"GNU Free Documentation License". -->
<!-- Created by GNU Texinfo 6.7, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Common Lisp Documentation Weaver</title>

<meta name="description" content="Common Lisp Documentation Weaver">
<meta name="keywords" content="Common Lisp Documentation Weaver">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2any">
<link href="#Top" rel="start" title="Top">
<link href="#Index" rel="index" title="Index">
<link href="#SEC_Contents" rel="contents" title="Table of Contents">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="texinfo-klare.css">


</head>

<body lang="en">
<h1 class="settitle" align="center">Common Lisp Documentation Weaver</h1>


















<span id="SEC_Contents"></span>
<h2 class="contents-heading">Table of Contents</h2>

<div class="contents">

<ul class="no-bullet">
  <li><a id="toc-Introduction-1" href="#Introduction">1 Introduction</a></li>
  <li><a id="toc-Installation-1" href="#Installation">2 Installation</a></li>
  <li><a id="toc-Usage-1" href="#Usage">3 Usage</a></li>
  <li><a id="toc-Commands-1" href="#Commands">4 Commands</a></li>
  <li><a id="toc-Documentation-systems-1" href="#Documentation-systems">5 Documentation systems</a>
  <ul class="no-bullet">
    <li><a id="toc-Texinfo-1" href="#Texinfo">5.1 Texinfo</a></li>
  </ul></li>
  <li><a id="toc-API-1" href="#API">6 API</a></li>
  <li><a id="toc-Index-1" href="#Index" rel="index">7 Index</a></li>
</ul>
</div>


<span id="Top"></span><div class="header">
<p>
Next: <a href="#Introduction" accesskey="n" rel="next">Introduction</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Top-1"></span><h1 class="top">Top</h1>
<span id="index-docweaver"></span>
<span id="index-cl_002ddocweaver"></span>

<p>CL-DOCWEAVER is a document weaver for Common Lisp.
</p>
<p>Documentation for a Lisp project can be written using (potentially) any tool choosen by the user (like Texinfo, Markdown, etc). Then, Common Lisp definitions are referenced and embedded from the documentation source using weaving commands.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#Introduction" accesskey="1">Introduction</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Installation" accesskey="2">Installation</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Usage" accesskey="3">Usage</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Commands" accesskey="4">Commands</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Documentation-systems" accesskey="5">Documentation systems</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#API" accesskey="6">API</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Index" rel="index" accesskey="7">Index</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<span id="Introduction"></span><div class="header">
<p>
Next: <a href="#Installation" accesskey="n" rel="next">Installation</a>, Previous: <a href="#Top" accesskey="p" rel="prev">Top</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Introduction-1"></span><h2 class="chapter">1 Introduction</h2>
<span id="introduction"></span>
<p>CL-DOCWEAVER is a document weaver for Common Lisp.
</p>
<p>Documentation for a Lisp project is written with the user&rsquo;s tool of choice (like Texinfo, Markdown, etc). Then, Common Lisp definitions are expanded into the documentation source using DocWeaver commands.
</p>
<p>DOCWEAVER commands give the user control on how definitions are to be expanded, either via command options or by choosing a different set of commands.
</p>
<p>CL-DOCWEAVER is easy to extend to support different documentation tools.
</p>
<p>Texinfo and Markdown are the ones with best support at this moment.
</p>
<hr>
<span id="Installation"></span><div class="header">
<p>
Next: <a href="#Usage" accesskey="n" rel="next">Usage</a>, Previous: <a href="#Introduction" accesskey="p" rel="prev">Introduction</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Installation-1"></span><h2 class="chapter">2 Installation</h2>
<span id="installation"></span>

<hr>
<span id="Usage"></span><div class="header">
<p>
Next: <a href="#Commands" accesskey="n" rel="next">Commands</a>, Previous: <a href="#Installation" accesskey="p" rel="prev">Installation</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Usage-1"></span><h2 class="chapter">3 Usage</h2>
<span id="usage"></span>
<p>First choose your documentation system (either Texinfo or Markdown at this moment).
</p>
<p>Write your documentation as you normally would for the chosen documentation system; then, whenever you need to reference to something in your Common Lisp system, use DocWeaver commands to expand Lisp definitions.
</p>
<p>Commands have the following syntax: <tt>(@command-name &amp;rest args)</tt>.
</p>
<p>For example, use <tt>(@clfunction alexandria:flatten)</tt> to expand the definition of <code>ALEXANDRIA:FLATTEN</code> function.
</p>
<p>That looks like this:
</p>
<span id="index-ALEXANDRIA_003aFLATTEN"></span>
<span id="ALEXANDRIA_003aFLATTEN-function"></span><dl>
<dt id="index-FLATTEN">ALEXANDRIA: <strong>FLATTEN</strong> <em>(tree)</em></dt>
<dd>
<p>Traverses the <var>tree</var> in order, collecting non-null leaves into a list.
</p></dd></dl>

<p>Note that commands usually receive options in order to be able to control different aspects of the expanded definition.
</p>
<p>By default, docstrings are parsed to extract possible references to other parts of the code; then those references are formatted as links that can be used to navigate the source code.
</p>
<p>Finally, use See <a href="#DOCWEAVER_003aWEAVE_002dFILE-function">WEAVE-FILE</a>to weave your documentation system source files.
</p>
<hr>
<span id="Commands"></span><div class="header">
<p>
Next: <a href="#Documentation-systems" accesskey="n" rel="next">Documentation systems</a>, Previous: <a href="#Usage" accesskey="p" rel="prev">Usage</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Commands-1"></span><h2 class="chapter">4 Commands</h2>
<span id="commands"></span>
<dl>
<dt id="index-_0040clvariable">Command: <strong>@clvariable</strong> <em>(function-symbol &amp;rest args)</em></dt>
<dd>
<p>Expands definition for variable bound to FUNCTION-SYMBOL.
</p>
<p>For example,
</p>
<p><code>(@clvariable cl:*standard-output*)</code>
</p>
<p>Looks like this:
</p>
<span id="index-COMMON_002dLISP_003a_002aSTANDARD_002dOUTPUT_002a"></span>
<span id="COMMON_002dLISP_003a_002aSTANDARD_002dOUTPUT_002a-variable"></span><dl>
<dt id="index-_002aSTANDARD_002dOUTPUT_002a">COMMON-LISP: <strong>*STANDARD-OUTPUT*</strong></dt>
<dd>
<p>default output stream
</p></dd></dl>

</dd></dl>

<dl>
<dt id="index-_0040clfunction">Command: <strong>@clfunction</strong> <em>(function-symbol &amp;rest args)</em></dt>
<dd>
<p>Expands definition for function bound to FUNCTION-SYMBOL.
</p>
<p>For example,
</p>
<p><code>(@clfunction alexandria:map-permutations)</code>
</p>
<p>Looks like this:
</p>
<span id="index-ALEXANDRIA_003aMAP_002dPERMUTATIONS"></span>
<span id="ALEXANDRIA_003aMAP_002dPERMUTATIONS-function"></span><dl>
<dt id="index-MAP_002dPERMUTATIONS">ALEXANDRIA: <strong>MAP-PERMUTATIONS</strong> <em>(function sequence &amp;key (start 0) end length (copy t))</em></dt>
<dd>
<p>Calls <var>function</var> with each permutation of <var>LENGTH</var> constructable<br>
from the subsequence of <var>SEQUENCE</var> delimited by <var>START</var> and <var>END</var>. <var>START</var><br>
defaults to 0, <var>END</var> to <var>length</var> of the <var>sequence</var>, and <var>LENGTH</var> to the<br>
<var>length</var> of the delimited subsequence.
</p></dd></dl>

</dd></dl>

<dl>
<dt id="index-_0040clpackage">Command: <strong>@clpackage</strong> <em>(package-name &amp;key (include-external-definitions t) include-internal-definitions (categorized t))</em></dt>
<dd>
<p>Expands definition for Common Lisp package named <var>PACKAGE-NAME</var>.
</p>
<p>If <var>INCLUDE-EXTERNAL-DEFINITIONS</var> is <code>T</code>, then all package external definitions are expanded.
</p>
<p>If <var>INCLUDE-INTERNAL-DEFINITIONS</var> is <code>T</code>, then all package internals definitions are expanded.
</p>
<p>If <var>CATEGORIZED</var> is <code>T</code>, then package definitions appear categorized in sections (variables, functions, etc).
</p>
<p>Example:
</p>
<p><code>(@clpackage :alexandria)</code>
</p>
</dd></dl>

<dl>
<dt id="index-_0040clref">Command: <strong>@clref</strong> <em>(symbol type)</em></dt>
<dd>
<p>Creates a reference to <var>SYMBOL</var>. <var>TYPE</var> should be one of <code>variable</code>, <code>function</code>, <code>class</code>, etc.
</p>
<p>For example, to reference ALEXANDRIA:FLATTEN function, do this:
</p>
<p><code>(@clref alexandria:flatten, function)</code>
</p>
<p>And this is the resulting link: See <a href="#ALEXANDRIA_003aFLATTEN-function">FLATTEN</a>
</p>
</dd></dl>

<hr>
<span id="Documentation-systems"></span><div class="header">
<p>
Next: <a href="#API" accesskey="n" rel="next">API</a>, Previous: <a href="#Commands" accesskey="p" rel="prev">Commands</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Documentation-systems-1"></span><h2 class="chapter">5 Documentation systems</h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#Texinfo" accesskey="1">Texinfo</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<span id="Texinfo"></span><div class="header">
<p>
Up: <a href="#Documentation-systems" accesskey="u" rel="up">Documentation systems</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Texinfo-1"></span><h3 class="section">5.1 Texinfo</h3>

<p>The Texinfo output needs to include <code>common-lisp.texi</code> file, that is shipped with CL-DOCWEAVER.
</p>
<p>The <code>common-lisp.texi</code> file contains a set of Texinfo macros that are used by CL-DOCWEAVER for expanding Common Lisp definitons.
</p>
<p>You can have a look at CL-DOCWEAVER own documentation in <code>docs/cl-docweaver.texi</code> for an example for how this should be used.
</p>
<hr>
<span id="API"></span><div class="header">
<p>
Next: <a href="#Index" accesskey="n" rel="next">Index</a>, Previous: <a href="#Documentation-systems" accesskey="p" rel="prev">Documentation systems</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="API-1"></span><h2 class="chapter">6 API</h2>
<span id="api"></span>
<dl>
<dt id="index-DOCWEAVER">PACKAGE: <strong>DOCWEAVER</strong></dt>
</dl>

<span id="External-definitions"></span><h3 class="heading">External definitions</h3>

<span id="Functions"></span><h3 class="heading">Functions</h3>
<span id="index-DOCWEAVER_003aWEAVE_002dFILE"></span>
<span id="DOCWEAVER_003aWEAVE_002dFILE-function"></span><dl>
<dt id="index-WEAVE_002dFILE">DOCWEAVER: <strong>WEAVE-FILE</strong> <em>(file output-file &amp;rest options &amp;key docsystem modules command-prefix (parse-docstrings t))</em></dt>
<dd>
<p>Weaves documentation source in <var>FILE</var> and writes the result to <var>OUTPUT-FILE</var>.<br>
<br>
Arguments:<br>
<br>
- DOCSYSTEM: specify the documentation tool that is being used (<var>:texinfo</var>, <var>:markdown</var>, etc.).<br>
- MODULES: is the list of <var>modules</var> (or ASDF system names) that need to be loaded to be able to read definition descriptions.<br>
- COMMAND-PREFIX: is the character to use as prefix for commands. The character &lsquo;at&lsquo; is the default.<br>
- PARSE-DOCSTRINGS: if <var>T</var>, then docstings are parsed and highlighted and references to code from it created.
</p></dd></dl>



<hr>
<span id="Index"></span><div class="header">
<p>
Previous: <a href="#API" accesskey="p" rel="prev">API</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Index-1"></span><h2 class="chapter">7 Index</h2>

<table><tr><th valign="top">Jump to: &nbsp; </th><td><a class="summary-letter" href="#Index_cp_letter-C"><b>C</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_letter-D"><b>D</b></a>
 &nbsp; 
</td></tr></table>
<table class="index-cp" border="0">
<tr><td></td><th align="left">Index Entry</th><td>&nbsp;</td><th align="left"> Section</th></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index_cp_letter-C">C</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-cl_002ddocweaver">cl-docweaver</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Top">Top</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index_cp_letter-D">D</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-docweaver">docweaver</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Top">Top</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
</table>
<table><tr><th valign="top">Jump to: &nbsp; </th><td><a class="summary-letter" href="#Index_cp_letter-C"><b>C</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_letter-D"><b>D</b></a>
 &nbsp; 
</td></tr></table>
<table><tr><th valign="top">Jump to: &nbsp; </th><td><a class="summary-letter" href="#Index_vr_symbol-1"><b>*</b></a>
 &nbsp; 
<br>
<a class="summary-letter" href="#Index_vr_letter-C"><b>C</b></a>
 &nbsp; 
</td></tr></table>
<table class="index-vr" border="0">
<tr><td></td><th align="left">Index Entry</th><td>&nbsp;</td><th align="left"> Section</th></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index_vr_symbol-1">*</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002aSTANDARD_002dOUTPUT_002a"><code>*STANDARD-OUTPUT*</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Commands">Commands</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index_vr_letter-C">C</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-COMMON_002dLISP_003a_002aSTANDARD_002dOUTPUT_002a"><code>COMMON-LISP:*STANDARD-OUTPUT*</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Commands">Commands</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
</table>
<table><tr><th valign="top">Jump to: &nbsp; </th><td><a class="summary-letter" href="#Index_vr_symbol-1"><b>*</b></a>
 &nbsp; 
<br>
<a class="summary-letter" href="#Index_vr_letter-C"><b>C</b></a>
 &nbsp; 
</td></tr></table>
<table><tr><th valign="top">Jump to: &nbsp; </th><td><a class="summary-letter" href="#Index_fn_symbol-1"><b>@</b></a>
 &nbsp; 
<br>
<a class="summary-letter" href="#Index_fn_letter-A"><b>A</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_fn_letter-D"><b>D</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_fn_letter-F"><b>F</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_fn_letter-M"><b>M</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_fn_letter-W"><b>W</b></a>
 &nbsp; 
</td></tr></table>
<table class="index-fn" border="0">
<tr><td></td><th align="left">Index Entry</th><td>&nbsp;</td><th align="left"> Section</th></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index_fn_symbol-1">@</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_0040clfunction"><code>@clfunction</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Commands">Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_0040clpackage"><code>@clpackage</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Commands">Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_0040clref"><code>@clref</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Commands">Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_0040clvariable"><code>@clvariable</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Commands">Commands</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index_fn_letter-A">A</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-ALEXANDRIA_003aFLATTEN"><code>ALEXANDRIA:FLATTEN</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Usage">Usage</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ALEXANDRIA_003aMAP_002dPERMUTATIONS"><code>ALEXANDRIA:MAP-PERMUTATIONS</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Commands">Commands</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index_fn_letter-D">D</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-DOCWEAVER_003aWEAVE_002dFILE"><code>DOCWEAVER:WEAVE-FILE</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#API">API</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index_fn_letter-F">F</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-FLATTEN"><code>FLATTEN</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Usage">Usage</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index_fn_letter-M">M</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-MAP_002dPERMUTATIONS"><code>MAP-PERMUTATIONS</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Commands">Commands</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index_fn_letter-W">W</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-WEAVE_002dFILE"><code>WEAVE-FILE</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#API">API</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
</table>
<table><tr><th valign="top">Jump to: &nbsp; </th><td><a class="summary-letter" href="#Index_fn_symbol-1"><b>@</b></a>
 &nbsp; 
<br>
<a class="summary-letter" href="#Index_fn_letter-A"><b>A</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_fn_letter-D"><b>D</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_fn_letter-F"><b>F</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_fn_letter-M"><b>M</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_fn_letter-W"><b>W</b></a>
 &nbsp; 
</td></tr></table>

<hr>



</body>
</html>
